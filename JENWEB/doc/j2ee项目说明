1:全局exception
使用@ControllerAdvice设定全局异常,分ajaxexception和WebException,未通过spring解析的页面使用web.xml里设定的异常,如500,405等
ajax异常需要抛出ajaxexception,WebException用于业务出错后跳转到统一异常页面
使用中,service和dao层直接在方法抛出,在control中可捕获异常假如自己的需要,一般情况下web业务异常可直接抛出WebException,JenExceptionHandler可捕获并记录日志,返回页面统一异常提示.
ajax异常需要trycatch捕获后抛出,JenExceptionHandler会自动记日志(以ajaxException异常方式记录,如在方法抛出,会进入内部方法优先以trycatch中的exception抛出,导致进入JenExceptionHandler中的WebException方法,进而返回页面出错代码),
使用样例UserController.java

2:缓存使用redis,组件jedis, spring-data-redis,注解方式使用,例子:com.jen.sen.service.system.user.impl.UserServiceImpl.按id,name等查用改变较少的地方可以用缓存,其余按业务需要.缓存key策略:以service层的类名+ID

3:权限使用shiro.权限缓存redis

4:缓存权限更新方法:地址:http://localhost:8080/JENWEB/system/admin/clsPermsCacheByUserID?userID=381
执行后,会更新所有授权缓存,制定用户id的授权\菜单缓存.通常对某个用户修改权限后执行.
修改角色,资源等权限后,可执行:http://localhost:8080/JENWEB/system/admin/clsAllPermsCache
清楚所有授权缓存

